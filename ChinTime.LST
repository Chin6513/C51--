C51 COMPILER V9.57.0.0   CHINTIME                                                          01/18/2022 19:13:01 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE CHINTIME
OBJECT MODULE PLACED IN ChinTime.OBJ
COMPILER INVOKED BY: H:\Keil_v5\C51\BIN\C51.EXE ChinTime.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>
   2          #define uint unsigned int
   3          #define uchar unsigned char
   4          
   5          sbit N1=P2^3;   //N是数码管位数
   6          sbit N2=P2^4;
   7          sbit N3=P2^5;
   8          sbit N4=P2^6;
   9          
  10          uchar a[]={0x05,0x7d,0x46,0x54,0x3c,0x94,0x84,0x5d,0x04,0x14};//数码管"0~9"字符
  11          uchar b=0x01;//数码管"0."字符
  12          void delay(uint xms);   //延迟函数，延迟xms毫秒
  13          
  14          void main()
  15          {
  16   1              void decimal(uint d);   //负责显示小数部分
  17   1              void integer(uint z);   //负责显示整数部分
  18   1              uint m,n;
  19   1              
  20   1              for(m=0;m<=9;m++)               //小数部分
  21   1              for(n=100;n>0;n--)
  22   1              decimal(m);
  23   1              
  24   1              for(m=1;m<=9999;m++)    //整数部分
  25   1              for(n=25;n>0;n--)
  26   1              integer(m);
  27   1      }
  28          
  29          void delay(uint xms)
  30          {
  31   1              uint i;
  32   1              for(;xms>0;xms--)
  33   1              for(i=110;i>0;i--);
  34   1      }
  35          
  36          void decimal(uint d)
  37          {                               //显示小数部分
  38   1              N3=0;
  39   1              P0=b;           //第三位始终为"0."
  40   1              delay(5);
  41   1              N3=1;
  42   1              N4=0;
  43   1              P0=a[d];        //第四位是输入的实参
  44   1              delay(5);
  45   1              N4=1;
  46   1      }
  47          
  48          void integer(uint z)
  49          {
  50   1              uint p,q,x,y;
  51   1              void single(uint k);
  52   1              void ten(uint k);
  53   1              void hundred(uint k);
  54   1              void thousand(uint k);
  55   1              p=z/1000;               //p为千位数
C51 COMPILER V9.57.0.0   CHINTIME                                                          01/18/2022 19:13:01 PAGE 2   

  56   1              q=z%1000/100;   //q为百位数
  57   1              x=z%100/10;             //x为十位数
  58   1              y=z%10;                 //y为个位数
  59   1              
  60   1              //让数字前面为0的不显示，并且对于不同位数提供不同延时
  61   1              //该过程为控速过程，延时过长会导致灯光闪烁不稳定，过短显示速度过快
  62   1              if(p!=0)
  63   1              {single(y);ten(x);hundred(q);thousand(p);delay(12);}
  64   1              else if(q!=0)
  65   1              {single(y);ten(x);hundred(q);delay(12);}
  66   1              else if(x!=0)
  67   1              {single(y);ten(x);delay(20);}
  68   1              else
  69   1              {single(y);delay(12);single(y);delay(12);}
  70   1      }
  71          
  72          void single(uint k)     //只显示第四位数
  73          {
  74   1              N4=0;
  75   1              P0=a[k];
  76   1              delay(1);
  77   1              N4=1;
  78   1      }
  79          void ten(uint k)                //只显示第三位数
  80          {
  81   1              N3=0;
  82   1              P0=a[k];
  83   1              delay(1);
  84   1              N3=1;
  85   1      }
  86          void hundred(uint k)    //只显示第二位数
  87          {
  88   1              N2=0;
  89   1              P0=a[k];
  90   1              delay(1);
  91   1              N2=1;
  92   1      }
  93          void thousand(uint k)//只显示第一位数
  94          {
  95   1              N1=0;
  96   1              P0=a[k];
  97   1              delay(1);
  98   1              N1=1;
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    406    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11      12
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
